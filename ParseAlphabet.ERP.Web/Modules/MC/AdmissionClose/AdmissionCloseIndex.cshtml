@using System.Security.Claims
@{
    ViewBag.Title = "بستن صندوق ها";
}


<link href="~/lib/ModalePrint/PrintCss.css" rel="stylesheet"/>
<link href="~/lib/ModulesCss/AdmissionClose.css" rel="stylesheet"/>


<div class="content-page displaynone" id="content-page">
    <div class="content">
        <div class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="header-title">
                            <div class="button-items">
                                <span class="float-right">@ViewBag.Title</span>

                                <input id="userType" type="checkbox" checked data-toggle="toggle" data-on="ثبت کننده - @User.FindFirstValue("FullName")" data-off="همه ثبت کنندگان" data-onstyle="success" data-offstyle="info" data-width="180" data-height="27">
                                <button type="button" id="formPlateListAdd" onclick="addForm()" class="btn btn-info waves-effect waves-light" title="Ctrl + Insert"><i class="fa fa-plus-circle"></i>افزودن</button>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-lg-3 col-md-3 displaynone" id="relationalBox">
                                <div class="form-group d-flex">
                                    <label class="relational-caption">کپشن فیلتر</label>
                                    <div class="chosen-container-parent" style="float: right !important">
                                        <select data-placeholder="انتخاب کنید..." id="form_keyvalue" class="select2">
                                            <option value="0">انتخاب کنید...</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body" id="pagetable">
                            @await Html.PartialAsync("/Modules/NewPageTableV1.cshtml")
                        </div>
                    </div>
                </div>
            </div> <!-- end col -->
        </div>
    </div>
</div>


<div id="addAdmissionClose" class="modal fade" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="modal_title" aria-hidden="true" onkeydown="modal_onkeydown(event, this)">
    <div class="modal-dialog modal-size-lg">
        <div class="modal-content">
            <div class="modal-header bg-header">
                <div class="text-right">
                    <h5 class="modal-title mt-0" id="modal_title">افزودن</h5>
                </div>
            </div>
            <div id="admCloseForm" class="modal-body modal-max-height-lg text-right" data-parsley-validate>
                <fieldset class="group-box group-box-green mb-3" id="admissionRequestModal" data-parsley-validate>
                    <legend>جستجو</legend>
                    <div class="row">
                        <div class="form-group col-sm-4">
                            <label>نام شعبه</label>
                            <div>
                                <select class="form-control select2" id="branchId" required data-parsley-selectvalzero="" data-parsley-errors-container="#branchIdErrorContainer" tabindex="1">
                                    @*<option value="0">انتخاب کنید</option>*@
                                </select>
                            </div>
                            <div id="branchIdErrorContainer"></div>
                        </div>
                        <div class="form-group col-lg-4 col-sm-4 m-0">
                            <label>تاریخ </label>
                            <div class="double-input-box">
                                <div class="double-input">
                                    <input type="text" id="fromWorkDayDatePersian" class="form-control number persian-date" value="@DateTime.Now.ToPersianDateString("{0}/{1}/01")" placeholder="____/__/__" data-inputmask="'mask':'9999/99/99'" data-parsley-shamsidate data-parsley-validate-if-empty="true" data-parsley-errors-container="#fromWorkDayDatePersianErrorContainer" data-parsley-comparedate="toWorkDayDatePersian" data-parsley-dateisonemonth="toWorkDayDatePersian" maxlength="10" tabindex="2"/>
                                </div>
                                <div class="double-input">
                                    <input type="text" id="toWorkDayDatePersian" class="form-control number persian-date" value="@DateTime.Now.ToPersianDateString("{0}/{1}/{2}")" placeholder="____/__/__" data-inputmask="'mask':'9999/99/99'" data-parsley-shamsidate data-parsley-validate-if-empty="true" data-parsley-errors-container="#toWorkDayDatePersianErrorContainer" maxlength="10" tabindex="3"/>
                                </div>
                            </div>
                            <div class="double-input-box">
                                <div class="double-input" id="fromWorkDayDatePersianErrorContainer"></div>
                                <div class="double-input" id="toWorkDayDatePersianErrorContainer"></div>
                            </div>
                        </div>

                        <div class="form-group col-md-2">
                            <button id="searchBtn" onclick="admissionCloseRequestSearch()" type="button" class="btn btn-light border-green" style="margin-top:22.5px" tabindex="4"><i class="fa fa-search"></i>جستجو</button>
                        </div>
                    </div>
                </fieldset>
                <div class="card-body" id="pagetableAdd">
                    @await Html.PartialAsync("/Modules/NewPageTable.cshtml")
                </div>
            </div>
            <div class="modal-footer">
                <button id="modal-close" onclick="modal_close('addAdmissionClose')" class="btn btn-secondary waves-effect" data-dismiss="modal"><i class="fa fa-times-circle"></i>انصراف</button>
            </div>
        </div>
    </div>
</div>

<div id="addAdmissionCashDifference" class="modal fade" tabindex="-1" data-keyboard="false" role="dialog" aria-labelledby="modal_title" aria-hidden="true" onkeydown="modal_onkeydown(event, this)">
    <div class="modal-dialog modal-size-lg">
        <div class="modal-content">
            <div class="modal-header bg-header">
                <div class="text-right">
                    <h5 class="modal-title mt-2" id="">لیست درخواست های تسویه نشده</h5>
                </div>
                <div class="button-items">
                    <button type="button" id="differenceItemsExportCSV" class="btn btn-excel waves-effect"><i class="fa fa-file-excel"></i>اکسل</button>
                </div>
            </div>
            <div class="modal-body modal-max-height text-right" data-parsley-validate>
                <div class="card-body">
                    <div class="table-responsive table-responsive-thead-fixed">
                        <table class="table table-styles border mb-0" id="pagetable">
                            <thead class="table-thead-fixed">
                            <tr>
                                <th class="col-width-percent-10">ردیف</th>
                                <th class="col-width-percent-10">کاربر ثبت کننده</th>
                                <th class="col-width-percent-10">شماره درخواست</th>
                                <th class="col-width-percent-10">نوع درخواست</th>
                                <th class="col-width-percent-10">تاریخ</th>
                                <th class="col-width-percent-10">خالص قابل دریافت</th>
                            </tr>
                            </thead>
                            <tbody id="differenceItems_row">
                            </tbody>
                            <tbody id="" class="table-summarybody-fixed font-weight-bold">
                            <tr>
                                <td class="col-width-percent-10">تعداد سطر : <span id="rowCountAdmissionClose"></span></td>
                                <td class="col-width-percent-10">تعداد خدمت : <span id="rowCountAdmissionService"></span></td>
                                <td class="col-width-percent-10">تعداد کالا : <span id="rowCountAdmissionSale"></span></td>
                                <td class="col-width-percent-10"></td>
                                <td class="col-width-percent-10">جمع کل :</td>
                                <td class="col-width-percent-10" id="summeryAdmissionClose"></td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="differenceItemsClose" class="btn btn-secondary waves-effect"><i class="fa fa-times-circle"></i>انصراف</button>
            </div>
        </div>
    </div>
</div>

<div id="PrnAdmissionClose" class="modal fade" tabindex="-1" data-keyboard="false" role="dialog" aria-labelledby="modal_title" aria-hidden="true" onkeydown="modal_onkeydown(event, this)">
    <div class="modal-dialog modal-size-sm">
        <div class="modal-content">
            <div class="modal-header bg-header">
                <div class="text-right">
                    <h5 class="modal-title mt-2" id="modal_title">چاپ</h5>
                </div>
            </div>
            <div class="modal-body modal-max-height text-right" data-parsley-validate style="padding:0;">
                <div class="PrnModalId" id="rowKeyId">
                    <div class="d-block w-100 text-right mb-2 pr-3">
                        <div class="key_id">
                            <lable id="modal_keyid_caption">شناسه : </lable> <span id="modal_keyid_value">0</span>
                        </div>
                    </div>
                </div>
                <div class="card-body" style="padding:0;">
                    <div class="input-group col-12 PrnModalDiv">
                        <i class="fa fa-print fa-modal-print"></i>
                        <a id="PrntType1" onclick="buttonPrnAdmissionClose(1)" class="btn btn-default" style="font-weight:bolder;">خلاصه گزارش بستن صندوق - دریافتی</a>
                    </div>
                    <div class="input-group col-12 PrnModalDiv">
                        <i class="fa fa-print fa-modal-print"></i>
                        <a id="PrntType2" onclick="buttonPrnAdmissionClose(2)" class="btn btn-default" style="font-weight:bolder;">خلاصه گزارش بستن به تفکیک صندوق - دریافتی</a>
                    </div>
                    <div class="input-group col-12 PrnModalDiv">
                        <i class="fa fa-print fa-modal-print"></i>
                        <a id="PrntType3" onclick="buttonPrnAdmissionClose(3)" class="btn btn-default" style="font-weight:bolder;">خلاصه گزارش بستن به تفکیک صندوقدار - دریافتی</a>
                    </div>
                    <div class="input-group col-12 PrnModalDiv">
                        <i class="fa fa-print fa-modal-print"></i>
                        <a id="PrntType4" onclick="buttonPrnAdmissionClose(4)" class="btn btn-default" style="font-weight:bolder;">خلاصه گزارش مقایسه ای بستن صندوق - اظهاری / دریافتی</a>
                    </div>
                    <div class="input-group col-12 PrnModalDiv">
                        <i class="fa fa-print fa-modal-print"></i>
                        <a id="PrntType5" onclick="buttonPrnAdmissionClose(5)" class="btn btn-default" style="font-weight:bolder;">خلاصه گزارش مقایسه ای بستن به تفکیک صندوق - اظهاری / دریافتی</a>
                    </div>
                    <div class="input-group col-12 PrnModalDiv">
                        <i class="fa fa-print fa-modal-print"></i>
                        <a id="PrntType6" onclick="buttonPrnAdmissionClose(6)" class="btn btn-default" style="font-weight:bolder;">خلاصه گزارش مقایسه ای بستن به تفکیک صندوقدار - اظهاری / دریافتی</a>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border:0;">
                <button id="modal-close" onclick="modal_close('PrnAdmissionClose')" class="btn btn-secondary waves-effect"><i class="fa fa-times-circle"></i>انصراف</button>
            </div>
        </div>
    </div>
</div>

<script src="~/js/formplate.js"></script>
<script src="~/js/admission.js?ver=@Guid.NewGuid().ToString().Replace("-", "")"></script>
<script src="~/Modules/MC/AdmissionClose/AdmissionCloseIndex.js?ver=@Guid.NewGuid().ToString().Replace("-", "")"></script>